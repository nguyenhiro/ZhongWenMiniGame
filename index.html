<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ Ch∆°i Zhong Wen - S·∫µn S√†ng Th·ª≠ Th√°ch?</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXX" crossorigin="anonymous"></script>

    <style>
        /* ======================== */
        /* CSS cho Landing Page */
        /* ======================== */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            flex-direction: column;
            color: #fff;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://source.unsplash.com/1600x900/?quiz,brain,abstract');
        }

        .landing-container {
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-width: 800px;
            width: 90%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .landing-container h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .landing-container p.description {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .landing-container .btn {
            display: inline-block;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border: none;
            outline: none;
            color: white;
        }

        .btn-start { background-color: #4CAF50; }
        .btn-start:hover { background-color: #45a049; transform: translateY(-2px); }
        .btn-how-to { background-color: #008CBA; }
        .btn-how-to:hover { background-color: #007bb5; transform: translateY(-2px); }
        
        /* Modal H∆∞·ªõng D·∫´n */
        .instructions-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            color: #fff;
        }

        .instructions-modal-content {
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            color: #333;
            max-width: 500px;
            width: 90%;
            text-align: left;
        }

        .instructions-modal-content ul {
            list-style-type: none;
            padding-left: 0;
        }

        .instructions-modal-content button {
            background-color: #f44336;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        /* ======================== */
        /* CSS cho Game Container */
        /* ======================== */
        .game-container {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n game ƒëi */
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            text-align: center;
        }

        /* C√°c style game c≈© c·ªßa b·∫°n */
        body.game-active {
            background-image: none;
            background-color: #f0f0f0;
            color: #333;
        }
        
        .game-active .landing-container {
            display: none;
        }
        
        .game-active .game-container {
            display: block; /* Hi·ªÉn th·ªã game khi body c√≥ class 'game-active' */
        }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        #question-counter { font-size: 1.2em; font-weight: bold; color: #555; }
        #timer { font-size: 1.5em; font-weight: bold; color: #3498db; }
        #question { font-size: 1.5em; font-weight: bold; margin-bottom: 20px; color: #333; min-height: 50px; }
        .answers { display: grid; grid-template-columns: 1fr; gap: 10px; }
        .answer-btn { background-color: #3498db; color: #fff; border: none; padding: 15px; font-size: 1em; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease; }
        .answer-btn:hover { background-color: #2980b9; }
        .answer-btn.correct { background-color: #2ecc71; }
        .answer-btn.incorrect { background-color: #e74c3c; }
        #restart-btn { background-color: #f39c12; color: #fff; border: none; padding: 10px 20px; font-size: 1em; border-radius: 5px; cursor: pointer; margin-top: 20px; display: none; }
        #best-time { margin-top: 10px; font-size: 1.1em; color: #2c3e50; }
        .modal { display: none; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); justify-content: center; align-items: center; }
        .modal-content { background-color: #fff; margin: auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 500px; border-radius: 10px; text-align: center; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
        .modal-content button { margin: 10px; padding: 10px 20px; font-size: 1em; border: none; border-radius: 5px; cursor: pointer; color: #fff; }
        #replayLevel { background-color: #f39c12; }
        #nextLevel { background-color: #2ecc71; }
        .level-stats { margin-top: 15px; font-size: 1.1em; color: #555; text-align: left; border-top: 1px solid #ccc; padding-top: 10px; }
        .level-stats p { margin: 5px 0; }

        /* ======================== */
        /* CSS M·ªöI: Cho Dropdown Level */
        /* ======================== */
        #level-dropdown {
            background-color: #333; /* N·ªÅn t·ªëi cho dropdown */
            color: #fff; /* Ch·ªØ tr·∫Øng */
            border: 1px solid #555;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 1.1em;
            margin: 10px;
            cursor: pointer;
            -webkit-appearance: none; /* X√≥a style m·∫∑c ƒë·ªãnh c·ªßa browser cho select */
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2C114.7L154.5%2C247.3c-2.4%2C2.4-5.5%2C3.6-8.7%2C3.6c-3.2%2C0-6.3-1.2-8.7-3.6L5.4%2C114.7c-4.8-4.8-4.8-12.5%2C0-17.3c4.8-4.8%2C12.5-4.8%2C17.3%2C0L145.8%2C212l123.1-123.1c4.8-4.8%2C12.5-4.8%2C17.3%2C0C291.8%2C102.2%2C291.8%2C109.9%2C287%2C114.7z%22%2F%3E%3C%2Fsvg%3E'); /* Th√™m m≈©i t√™n tr·∫Øng */
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 12px;
        }

        #level-dropdown option {
            background-color: #333; /* N·ªÅn t·ªëi cho t·ª´ng option */
            color: #fff; /* Ch·ªØ tr·∫Øng cho t·ª´ng option */
        }

        /* ƒê·ªãnh d·∫°ng cho dropdown khi focus/hover */
        #level-dropdown:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.5);
        }
    </style>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3EE00XE0TZ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3EE00XE0TZ');
    </script>
</head>
<body>
    <div class="landing-container" id="landing-page">
        <header>
            <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Tr√≤ Ch∆°i Zhong Wen!</h1>
        </header>
        <main>
            <p class="description">
                B·∫°n ƒë√£ s·∫µn s√†ng cho m·ªôt th·ª≠ th√°ch t·ª´ v·ª±ng ch∆∞a? 
                Ki·ªÉm tra ki·∫øn th·ª©c t·ª´ v·ª±ng c·ªßa b·∫°n v·ªõi nh·ªØng c√¢u h·ªèi ƒëa d·∫°ng 
                v√† h·∫•p d·∫´n. H√£y c√πng kh√°m ph√°!
            </p>
            <div class="buttons">
                <button class="btn btn-start" id="startGameBtn">B·∫Øt ƒê·∫ßu Ch∆°i</button>
                <button class="btn btn-how-to" id="showInstructionsBtn">H∆∞·ªõng D·∫´n Ch∆°i</button>
            </div>

            <div id="level-selection-container" style="display:none; margin-top: 20px;">
                <h3>Ch·ªçn c·∫•p ƒë·ªô ƒë·ªÉ ch∆°i:</h3>
                <select id="level-dropdown" class="btn"></select>
                <button class="btn btn-start" onclick="startSelectedLevel()">Ch∆°i</button>
            </div>
        </main>
        <footer>
            <p>&copy; 28092025 Tr√≤ Ch∆°i Zhong Wen. T√°c gi·∫£ Nguy·ªÖn Ho√†i Nam.</p>
            <p>&copy; Th√¥ng tin donate cho t√°c gi·∫£ STK Vietcombank "1034414365" </p>
            <div class="donation-qr">
                <p>N·∫øu b·∫°n y√™u th√≠ch tr√≤ ch∆°i, h√£y chia s·∫ª ƒë·ªÉ c√≥ th√™m nhi·ªÅu b·∫°n b√® c√πng tham gia nh√©!</p>
                <p>C·∫£m ∆°n b·∫°n r·∫•t nhi·ªÅu! üôè</p>
            </div>
        </footer>
    </div>
    <div id="instructionsModal" class="instructions-modal">
        <div class="instructions-modal-content">
            <h2>C√°ch ch∆°i:</h2>
            <ul>
                <li>M·ªói c√¢u h·ªèi s·∫Ω c√≥ 2 l·ª±a ch·ªçn.</li>
                <li>Ch·ªçn ƒë√°p √°n m√† b·∫°n cho l√† ƒë√∫ng nh·∫•t.</li>
                <li>M·ª•c ti√™u 1 l√† tr·∫£ l·ªùi ƒë√∫ng t·∫•t c·∫£ ƒë·ªÉ v∆∞·ª£t qua c·∫•p ƒë·ªô.</li>
                <li>M·ª•c ti√™u 2 l√† trong th·ªùi gian ng·∫Øn nh·∫•t v∆∞·ª£t qua c·∫•p ƒë·ªô.</li>
                <li>Tr·∫£ l·ªùi sai s·∫Ω quay l·∫°i t·ª´ ƒë·∫ßu, h√£y c·∫©n th·∫≠n!</li>
            </ul>
            <button id="hideInstructionsBtn">ƒê√≥ng</button>
        </div>
    </div>

    <div class="game-container" id="game-page">
        <div class="header">
            <span id="question-counter">C√¢u h·ªèi: 1/10</span>
            <span id="timer">0s</span>
        </div>
        <h2 id="question">C√¢u h·ªèi s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y.</h2>
        <img id="question-image" src="" alt="H√¨nh ·∫£nh c√¢u h·ªèi" style="display: none; max-width: 100%; height: auto; margin-bottom: 20px; border-radius: 8px;">
        <div class="answers">
            <button class="answer-btn"></button>
            <button class="answer-btn"></button>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div id="resultModalContent"></div>
        </div>
    </div>

    <script type="module">
        const landingPage = document.getElementById('landing-page');
        const gamePage = document.getElementById('game-page');
        const instructionsModal = document.getElementById('instructionsModal');
        const startGameBtn = document.getElementById('startGameBtn');
        const showInstructionsBtn = document.getElementById('showInstructionsBtn');
        const hideInstructionsBtn = document.getElementById('hideInstructionsBtn');
        const levelSelectionContainer = document.getElementById('level-selection-container');
        const levelDropdown = document.getElementById('level-dropdown');
        
        let currentLevel = 1;
        const maxLevel = 30; // ƒê·∫∑t s·ªë c·∫•p ƒë·ªô t·ªëi ƒëa c·ªßa b·∫°n t·∫°i ƒë√¢y
        let currentQuestionIndex = 0;
        let score = 0;
        let levelTime = 0;
        let timerId;
        let currentQuestions;
        
        const questionElement = document.getElementById('question');
        const answerButtonsElement = document.querySelector('.answers');
        const questionCounterElement = document.getElementById('question-counter');
        const timerElement = document.getElementById('timer');
        const questionImageElement = document.getElementById('question-image');
        const resultModal = document.getElementById('resultModal');
        const resultModalContent = document.getElementById('resultModalContent');

        function showGamePage() {
            landingPage.style.display = 'none';
            gamePage.style.display = 'block';
            document.body.style.backgroundColor = '#f0f0f0';
            document.body.style.backgroundImage = 'none';
            document.body.style.color = '#333';
        }

        function showLandingPage() {
          landingPage.style.display = 'block';
          gamePage.style.display = 'none';
          document.body.style.backgroundImage = 'url("images/brto.png")';
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundPosition = 'center';
          document.body.style.backgroundRepeat = 'no-repeat';
          document.body.style.color = '#fff';
        }

        function showLevelSelection() {
            // ·∫®n c√°c n√∫t c≈©
            document.querySelector('.buttons').style.display = 'none';
            // Hi·ªÉn th·ªã container ch·ªçn level
            levelSelectionContainer.style.display = 'block';
            // X√≥a c√°c option c≈© tr∆∞·ªõc khi t·∫°o l·∫°i (ƒë·∫£m b·∫£o kh√¥ng b·ªã tr√πng l·∫∑p khi quay l·∫°i)
            levelDropdown.innerHTML = ''; 
            // T·ª± ƒë·ªông t·∫°o c√°c option cho dropdown
            for (let i = 1; i <= maxLevel; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `Level ${i}`;
                levelDropdown.appendChild(option);
            }
        }

        window.startSelectedLevel = function() {
            const selectedLevel = parseInt(levelDropdown.value);
            if (selectedLevel) {
                loadLevel(selectedLevel);
            }
        };

        function showInstructions() {
            instructionsModal.style.display = 'flex';
        }

        function hideInstructions() {
            instructionsModal.style.display = 'none';
        }
        
        function updateTimer() {
            levelTime++;
            timerElement.textContent = `${levelTime}s`;
        }

        function startTimer() {
            timerId = setInterval(updateTimer, 1000);
        }

        function resetTimer() {
            clearInterval(timerId);
            levelTime = 0;
            timerElement.textContent = "0s";
        }

        function startLevel(level, questionsData) {
            currentLevel = level;
            currentQuestions = questionsData;
            currentQuestionIndex = 0;
            score = 0;
            resetTimer();
            startTimer();
            showQuestion();
            resultModal.style.display = 'none';
        }

        window.loadLevel = async function(levelNumber) {
            try {
                const levelModule = await import(`./levels/level${levelNumber}.js`);
                const questionsData = levelModule.default;
                showGamePage();
                startLevel(levelNumber, questionsData);
            } catch (error) {
                console.error("Failed to load level:", error);
                alert("L·ªói: Kh√¥ng th·ªÉ t·∫£i m√†n ch∆°i n√†y. Vui l√≤ng ki·ªÉm tra l·∫°i ƒë∆∞·ªùng d·∫´n file ho·∫∑c t·∫°o file level t∆∞∆°ng ·ª©ng.");
            }
        };

        function showQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                endLevel();
                return;
            }
            const currentQuestion = currentQuestions[currentQuestionIndex];
            questionCounterElement.textContent = `C√¢u h·ªèi: ${currentQuestionIndex + 1}/${currentQuestions.length} (Level ${currentLevel})`;
            questionElement.textContent = currentQuestion.question;
            if (currentQuestion.image) {
                questionImageElement.src = currentQuestion.image;
                questionImageElement.style.display = 'block';
            } else {
                questionImageElement.style.display = 'none';
                questionImageElement.src = '';
            }
            const allAnswers = currentQuestion.answers;
            const correctAnswer = currentQuestion.correct;
            const wrongAnswers = allAnswers.filter(answer => answer !== correctAnswer);
            const randomWrongAnswer = wrongAnswers.length > 0 ? wrongAnswers[Math.floor(Math.random() * wrongAnswers.length)] : null;
            let displayAnswers = [correctAnswer];
            if (randomWrongAnswer) {
                displayAnswers.push(randomWrongAnswer);
            }
            shuffleArray(displayAnswers);
            answerButtonsElement.innerHTML = '';
            displayAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.textContent = answer;
                button.classList.add('answer-btn');
                button.addEventListener('click', () => selectAnswer(answer, correctAnswer));
                answerButtonsElement.appendChild(button);
            });
        }

        function selectAnswer(selectedAnswer, correctAnswer) {
            const allButtons = document.querySelectorAll('.answer-btn');
            const isCorrect = (selectedAnswer === correctAnswer);
            allButtons.forEach(button => {
                button.disabled = true;
                if (button.textContent === correctAnswer) {
                    button.classList.add('correct');
                } else if (button.textContent === selectedAnswer) {
                    button.classList.add('incorrect');
                }
            });
            setTimeout(() => {
                if (isCorrect) {
                    currentQuestionIndex++;
                    score++;
                } else {
                    alert(`ƒê√°p √°n sai! B·∫Øt ƒë·∫ßu l·∫°i Level ${currentLevel}.`);
                    loadLevel(currentLevel);
                    return;
                }
                showQuestion();
            }, 1000);
        }

        function endLevel() {
            clearInterval(timerId);
            const levelStatsKey = `level-${currentLevel}-stats`;
            const storedLevelStats = JSON.parse(localStorage.getItem(levelStatsKey)) || { time: Infinity };

            if (levelTime < storedLevelStats.time) {
                localStorage.setItem(levelStatsKey, JSON.stringify({ time: levelTime, score: score }));
            }

            let modalContentHtml = `
                <h2>Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh Level ${currentLevel}!</h2>
                <p>ƒêi·ªÉm: ${score}/${currentQuestions.length}</p>
                <p>Th·ªùi gian ho√†n th√†nh level: ${levelTime} gi√¢y</p>
                <p>Th·ªùi gian t·ªët nh·∫•t: ${storedLevelStats.time === Infinity ? 'Ch∆∞a c√≥' : storedLevelStats.time + ' gi√¢y'}</p>
                <button id="replayLevel">Ch∆°i l·∫°i Level ${currentLevel}</button>
            `;
            if (currentLevel < maxLevel) {
                modalContentHtml += `<button id="nextLevel">Ti·∫øp t·ª•c Level ${currentLevel + 1}</button>`;
            } else {
                modalContentHtml += `<h3>Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh to√†n b·ªô game!</h3>`;
            }
            resultModalContent.innerHTML = modalContentHtml;
            resultModal.style.display = 'flex';
            document.getElementById("replayLevel").onclick = () => {
                loadLevel(currentLevel);
            };
            if (currentLevel < maxLevel) {
                document.getElementById("nextLevel").onclick = () => {
                    loadLevel(currentLevel + 1);
                };
            }
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // G·∫Øn s·ª± ki·ªán cho n√∫t "B·∫Øt ƒê·∫ßu Ch∆°i"
        startGameBtn.addEventListener('click', showLevelSelection);
        showInstructionsBtn.addEventListener('click', showInstructions);
        hideInstructionsBtn.addEventListener('click', hideInstructions);
        
        document.addEventListener('DOMContentLoaded', showLandingPage);
    </script>
</body>
</html>


